# msgpack exchange data just like json but faster and smaller
pip install msgpack-python

bson and Mongodb
    BSON is a binary-encoded serialization of JSON-like documents. BSON is designed to be lightweight, traversable, and efficient.

brew formula

# store image into Redis
import redis
r =  redis.StrictRedis()
img = open("/path/to/img.jpeg","rb").read()
r.set("bild1",img)
-----------------------

netstat -anL
data gram and stream

alias vim='/Applications/MacVim.app/Contents/MacOS/Vim'

youcompleteme ./install.sh --clang-completer
hash -r

iterm2 profile
mac network profile

# path shortcut
echo 'CDPATH=~/.paths' >> ~/.bashrc


"Bad marshal data" when importing python module
    delete the pyo, pyc file of that file
svnadmin
    create <target>
    dump: dump the repo to standard output

svn log --limit 10
svn copy http://host/trunk http://host/branches/branch_one
svn copy http://host/trunk http://host/tags/v1.0.01
<trunk> svn merge http://host/branches/branch_one
svn mergeinfo
svn info file_path

svn revert -R .
svn diff -r 64222:64212 trunk/apps/admin/views/tool.py
svn remove branches/jia_dev;svn ci


django template
    {% with var=value %} {% endwith %}

<td align="center">


networksetup -listallnetworkservices
networksetup -setv6off Ethernet


mac ports

ssh tunnel
    ssh -fN -L 4321:remote_host:22 bridge_user@bridge_host


tcp_wrapper 匹配规则
    /etc/hosts.allow --> /etc/hosts.deny --> permited
mysql 限定用户登录IP
    grant user@'ip'


tail -f |grep -v 


create table test (str varchar(32), ts TIMESTAMP DEFAULT CURRENT_TIMESTAMP);
mongodb default timestamp


brew install libmemcached
pip install pylibmc --install-option="--with-libmemcached=/usr/local"

zip is a bytes -> bytes encoding

python venv
    2.7
        virtualenv -p /usr/bin/python2.7 <path>
    3.x
        pyvenv <path>
    source <path/bin/active>
    deactivate

SocketIO
Socket.IO 是一个面向实时 web 应用的 JavaScript 库。它使得服务器和客户端之间实时
双向的通信成为可能。他有两个部分：在浏览器中运行的客户端库，和一个面向Node.js的
服务端库。两者有着几乎一样的API。像Node.js一样，它也是事件驱动的.



brew tap gapple/services


import gc 
del a
gc.collect()


cent 7 
	firewalld : 动态防火墙, netfilter
	systemd
	xfs
	iscsi in kernel space



switch: 
    trunk mode
        native vlan
    access mode

iozone
iperf

time + command

kpartx: Partition device manager for device-mapper devices


cisco 2960 设置密码

console：
   conf t=> line console 0
   conf t=> password switch
   conf t=> end

telnet:
   conf t=> line vty 0 4
            password switch
            login
            end
enable
   conf t=> enable password switch
            end



/dev/ttyUSB0
minicom -s   => device ,9600


ignoredisk --only-use=sda

pxelinux.cfg/default | mac

puppet variables can't be capitalize

galera cluster datetime must be same

npm install -g mongo-hacker


netstat -an -f inet -p tcp
netstat -r -f inet


argument 实参
parameter 形参


object has attribute and method 

command not found : glibtoolize
    brew install libtool
command not found : aclocal
    brew install automake




use 'dmesg' to detect inserted device 






brew install libxml2
brew install libxslt
brew link libxml2 --force
brew link libxslt --force
sudo C_INCLUDE_PATH=/usr/local/include/libxml2 pip install lxml






# linux lvm
partprobe
pvcreate /dev/sda3; pvs
vgreate vg1 /dev/sda3;vgs
lvcreate -L 100M -n lv1 vg1;lvs
mkfs -t ext3 /dev/vg1/lv1
vgextend; lvextend; resize2fs


sudo python3 (command not found)
visudo: secure_path

poster: multipart_encode({"image1":open("a.jpg", "rb")})


mount -t cifs -o username=guest,password= //192.168.1.124/public /mnt
smbclient -L //192.168.1.124/public 


pip install pyreadline

#Jira installation
JIRA_HOME = /var/jira 
download mysql jdbc drive and put it in lib/

docker -d --registry-mirror=http://daocloud.io

cat /dev/urandom | md5sum
# Mac dd 过慢问题
dd if=Downloads/FreeBSD-10.1-RELEASE-amd64-memstick.img of=/dev/rdisk2 bs=1024000



iozone -a -i 0 -i 1 -f /var/lib/iozone.temp -Rab /root/read.xls -g 8G -n 4G -C

xtrabackup  socat 

for i in {1..5};do rsync --delete --exclude=database.php --exclude=start.php --exclude=check -vr hrcf/ web$i:/var/www/hrcf/ ;done


yum groupinstall "X Window System" xorg-x11-xauth dejavu-lgc-sans-fonts
dbus-uuidgen > /var/lib/dbus/machine-id



read a b c
a, b, c = sys.stdin.read().splite()


centos6.6 安装支持netns的iproute
[openstack-juno]
name=OpenStack Juno Repository
baseurl=http://repos.fedorapeople.org/repos/openstack/openstack-icehouse/epel-6/
enabled=1
skip_if_unavailable=0
gpgcheck=0

yum upgrade iproute

ls -l /sys/class/net/

virsh net-destroy default
virsh net-undefine default


docker run -t -i -v /root:/mnt:rw cppking/local_cent65 /bin/bash

主动模式的FTP是指服务器主动连接客户端的数据端口，被动模式的FTP是指服务器被动地等待客户端连接自己的数据端口

awk 'NR==5{print substr($0,2,3)}'

# compile python3
yum install tk-devel sqlite-devel readline-devel gdbm-devel xz-devel bzip2-devel openssl-devel; make -j



proxy_set_header        X-Real-IP       $remote_addr;
proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;

php_value[error_reporting] = 32767
php_flag[display_errors] = on

makewhatis

hostnamectl set-hostname 

ipcalc -cs x.x.x.x && echo 'IP Right' || echo 'IP Error'  

/etc/yum.conf proxy=http://proxysvr.yourdom.com:3128


vmstat: virtual memory statistics
sar: system activity report 
pmap: process memory usage 
top 1 z


uptime
w
pstree -np
ps aux
pmap -d PID
sar 1 5





mininet


filebucket [rollback]
hiera


puppet 变量作用域
	根据请求的host自动设置配置参数



openflow switch

VM auto-migration


noVNC
	VNC client using HTML5 (websocket + canvas) with encryption(wss://)support


oVirt
	a virtual datacenter managment platform




# ELK
curl localhost:9200/_nodes/process?pretty
curl 'localhost:9200/_cat/indices?v'
curl 'localhost:9200/_cat/nodes?v'
curl -XPUT 'localhost:9200/customer?pretty'
curl 'localhost:9200/_cat/indices?v'
curl -XPUT 'localhost:9200/customer/external/1?pretty' -d '
{
  "name": "John Doe"
}
curl -XDELETE 'localhost:9200/customer?pretty'
curl -XPUT 'localhost:9200/customer/external/1?pretty' -d '
{
  "name": "John Doe"
}'
ulimit -l unlimited(es cant start)
bootstrap.mlockall: true
vm.max_map_count=262144
vm.swappiness = 0

virsh storage pool

Max number of nodes = Number of shards * (number of replicas +1)
换句话说，如果你计划用10个分片和2个分片副本，那么最大的节点数是30。


bin/plugin -install karmi/elasticsearch-paramedic
bin/plugin --install mobz/elasticsearch-head
bin/plugin --install lukas-vlcek/bigdesk
bin/plugin --install lmenezes/elasticsearch-kopf/1.5.3


If you do not explicitly set underscores_in_headers on;, nginx will silently drop HTTP headers with underscores (which are perfectly valid according to the HTTP standard). This is done in order to prevent ambiguities when mapping headers to CGI variables, as both dashes and underscores are mapped to underscores during that process.



logstash forwarder: 加密传输


logstash -e 'input { stdin { } } output { stdout {} }'


ipconfig /all


mongodump --host mongodb1.example.net --port 37017 --username user --password pass /opt/backup/mongodump-2011-10-24



redis:MISCONF
config set stop-writes-on-bgsave-error no



STOP SLAVE;
SET GLOBAL SQL_SLAVE_SKIP_COUNTER = 1;
START SLAVE;

before, require
notify, subscribe



Error: database disk image is malformed -> yum clean dbcache

grep -H(with file name)



grep '^[^#]' /etc/sysconfig/nfs
RQUOTAD_PORT=875
LOCKD_TCPPORT=32803
LOCKD_UDPPORT=32803
MOUNTD_PORT=892
STATD_PORT=662
STATD_OUTGOING_PORT=663


mongo replset  election priority 
 

I/O Error with PHP5-FPM, ptrace(PEEKDATA) failed
disable 'request_slowlog_timeout'
set 'max_execution_time' in php.ini

mysqldump -w




#2014-3-6
- solved metadata service  
		use independent nova-metadata-api service
- solved spicehtml5 service
		pkill -9 nova-spicehtml5
- solved snapshot problem
		glance --is-public  
- ZFS usage

#2014-3-7
- solved linux injection
		metadata
		userdata
		file
		configuration drive
- windows injection
		cloud init
  
#2014-4-9
- cloud-init
- HA-document
- rabbitmq-cluster
- userdoc

#2014-4-30
- zfs backup script
- puppet module rewrite
- iscsi & multipath

#2014-5-4
- remote support for iflytek
- vmha service & nova evacuate
- sed learning
- puppet provision module

#2014-5-5
- mail server
- git review
- remote support for iflytek
- puppet provision module
- structured editor

#2014-5-6
- meta programming|DSL development environment
- completed puppet provision module

#2014-8-4
- razor work flow
- nailgun work flow
---------------------------
FATAL:  could not open lock file "/tmp/.s.PGSQL.5432.lock": Permission denied
rm -f /tmp/.s.PGSQL.5432.lock  /tmp/.s.PGSQL.5432
----------------------
ldd /path/to/exe  查看依赖的动态链接库
----------
arp -an | virsh dumpxml domain
--------
virt-install console parameter
----------
/opt/zentao/config/my.php
.ztaccess
install.php/ upgrade.php

RedirectMatch "^/$" "/zentao"
需要安装php-common,以便于apache结合
=============================
doku_wiki plugin configuration  exmail smtp port： 25
-----------------

@user {'deploy':
  uid     => 2004,
  comment => 'Deployment User',
  group   => www-data,
  groups  => ["enterprise"],
  tag     => [deploy, web],
}
realize User['deploy']

include virtual::users
User <| tag == web |> #resource collector
User <| title == 'deploy' |> #resource collector
--------------
mongo replset  election priority 
 


git tag 'name' 
git tag -l (list)
git tag -v 'name' (information)



I/O Error with PHP5-FPM, ptrace(PEEKDATA) failed
My first guess would be to disable request_slowlog_timeout. Since it's not working right, it may be doing more harm than good. If this doesn't fix the issue of running out of processes, then set the php.ini max_execution_time to something that will kill the script for sure.

想明白应该问什么样的问题，而一旦你抓准了问题，剩下的就很容易解决了

----------------
mc = memcached.Client(['localhost:11211'])
---------
yum metadata expire time  /etc/yum.conf
=======
export TMOUT=1800
===========
echo 'pass'|md5sum ;
select MD5('pass')
=========
nmap -Sp 10.10.1.0/24
ping -b 10.10.1.0/24
arp -n
=======
开3次方  pow(a, (1.0/3))
========
zip -e (encript)
tar |openssl 

============
au FileType python set ts=4 sts=4 sw=4
========
kernel parameter rdshell
===========
sftp

===========
write back:  写入缓存, 再根据policy写入磁盘, 缓存所有读(可调)
write through: 通写, 写入缓存的同时写入磁盘, 缓存所有读(可调)
write around: 仅写入磁盘, 不写缓存, 缓存所有读(可调)
write only: 只有写操作才会缓存, 不缓存读
read ahead
prefetch
===========
vmstat
    虚拟内存
    多级页表, page out(写入磁盘), page in(读入内存), 查不到发生page fault

buffer
    缓冲, 同步速率不同的设备,为了以后的写
    块设备层

cache
    缓存, 提高读取速度, 为了以后的读
    文件系统层

hugepage: 虚拟内存技术, 必须关闭swap

page cache: 
    逻辑级磁盘缓存
buffer:
    物理级磁盘缓存

paging: 虚拟内存技术


raid5:
    chunk
    strip
    rcw/rmw

ramdisk

=====
l1 cache,分为数据缓存和指令缓存, 静态RAM, 32-256KB
L2 cache,分为内部(速率等于主频)和外部(速率等于主频一半)两种芯片, 2-3MB
L3 cache

storage
network
database
======
jenkins daily build : build trigger: cron like 
java -jar jenkins.war --httpPort=9000 > jenkins.log  2>&1 &
=====
mknod
ramdisk

内核参数
    dirty_ratio


ctdb
=======
truncate -s 20G disk1
losetup /dev/loop1 disk1
========
kernel parameter rdshell
======
ip route add default via 10.10.1.1
ip addr add 10.10.1.6/24 dev eth0
======

btrfs
systemd


==========
k1: v1
k2: v2
subdict:
    - subk1: subv1
      subk2: subv2
list1:
    - v1
    - v2
yaml.load(stream)
==========
mkdir path/{dir1,dir2} no space 

route -n add 10.0.0.0/8 10.16.3.254
==========
import requests_unixsocket
session = requests_unixsocket.Session()
r = session.get('http+unix://%2Fvar%2Frun%2Fdocker.sock/images/json')
=========
echo -e "GET /images/json HTTP/1.1\r\n" | socat unix-connect:/var/run/docker.sock STDIO

# nc version (netcat-freebsd)
echo -e "GET /images/json HTTP/1.0\r\n" | nc -U /var/run/docker.sock

# bonus round: relay socket
socat -d -d TCP-L:8080,fork UNIX:/var/run/docker.sock
=============

ifconfig en0 alias x.x.x.x/msk
ifconfig en0 -alias x.x.x.x
==========
__file__.split('.')[0]
=========
pip install ftptool
========
dpkg -l
dpkg-query -L <package>
=======
Cannot open your terminal '/dev/pts/0' - please check.
script /dev/null
=======
diff -Naur old new > foo.patch
cd old; patch -p1 < /path/to/foo.patch

diff 的4种格式
=========
bash关联数组必须declare -A

conf/{passwd,svnserve.conf}
bash 4.3以上才能使用变量间接引用
==========
haldaemon can't start --> service messagbus start


export C_INCLUDE_PATH=/usr/local/include/<package>
make clean; make distclean
=========
ipython 出现DistributionNotFound, 重新安装distribution模块
ntpdate [0-3].cn.pool.ntp.org

samba-client
    smbclient -L <server>: show share
    smbpasswd -a <user>: internal user name

==========
python class.__dict__ 是只读的, dictproxy type
只能用setattr来设置属性


cp -f /usr/share/zoneinfo/Asia/Shanghai /etc/localtime
ntpdate pool.ntp.org

rsync -e 'ssh -p 1234' username@hostname:SourceFile DestFile


rsyslog: @@tcp @udp


remote: error: GH001: Large files detected. You may want to try Git Large File Storage - https://git-lfs.github.com.
git filter-branch -f --index-filter "git rm -rf --cached --ignore-unmatch FOLDERNAME" -- --all  
git rebase -i; edit; git rm -rf <large file>; git ci --amend ; git rebase --continue 



===============
minion 错误日志 
2014-06-06 02:04:22,505 [salt.crypt  ][ERROR   ] The master key has changed, the salt master could have been subverted, verify salt master's public key 
2014-06-06 02:04:22,506 [salt.crypt ][CRITICAL] The Salt Master server's public key did not authenticate! 
The master may need to be updated if it is a version of Salt lower than 2014.1.4, or If you are confident that you are connecting to a valid Salt Master, then remove the master public key and restart the Salt Minion. 
The master public key can be found at: 
/etc/salt/pki/minion/minion_master.pub 

解决办法 
master/syndic 端 
删除此minion KEY
salt-key -d xxx (minion ID)

minion 端 
删除minion_master.pub 
rm -rf /etc/salt/pki/minion/minion_master.pub

重启minion
/etc/init.d/salt-minion restart



weechat block leave/join message
/filter add irc_smart * irc_smart_filter *


dict sometime  lost datetime datatype


virt-what

python模块导入的路径与程序的入口有关


状态机
    表示有限个状态以及在这些状态之间的转移和动作等行为的数学模型。
    米利型(mealy) 
        Mealy有限状态机的输出不单与当前状态有关，而且与输入信号的当前值有关
    摩尔性(moore)
        摩尔型有限状态机的输出只与有限状态自动机的当前状态有关


Grunt: bootstrap's default build system, install by npm
bower: front-end package manager, install by npm



ssh -i /Users/rock/Desktop/key/jiashuanxi.id_rsa -p 36023 -L 5890:10.0.2.23:3306 jiashuanxi@114.80.0.39


## vbox 扩大硬盘容量
VBoxManage clonehd work-disk1.vmdk new.vdi --format vdi
VBoxManage modifyhd new.vdi --resize 20480
cfdisk /dev/sda # add partition
vgextend vg /dev/sda5
lvextent -l 100%FREE /dev/vg/lv_root
resize2fs /dev/vg/lv_root


hash: one way
encryption: two way




vi /etc/ld.so.conf.d/myapp.conf
    /usr/local/lib

export C_INCLUDE_PATH=
export LD_LIBRARY_PATH=



/etc/security/limits.conf

usr/bin/ld: /usr/local/lib/libpython2.7.a(abstract.o): relocation R_X86_64_32S against `_Py_NotImplementedStruct' can not be used when making a shared object; recompile with -fPIC

python compile
export CFLAGS="$CFLAGS -fPIC"


awk '!/time_transfer:0.00/{print $4,$7,$10,$11,$12}'|tr ' ' :|awk -F:  'BEGIN{s1=0;s2=0;s3=0;s4=0;total=0;}{if($9>=10){s1+=1}else if($9>=1){s2+=1}else if(0.5<=$9){s3+=1}else if(0.1<=$9){s4+=1};total+=1}END{print s1/total,s2/total, s3/total,s4/total}' OFS='\t' bigsec_3.log >result



watch -n 5 'seq 1 200 | xargs -I {} -n 1 -P 50 curl -o /dev/null -4 -s -w "`date`http_code:%{http_code}  http_connect:%{http_connect}  dns:%{time_namelookup}  redirect:%{time_redirect}  pretransfer:%{time_pretransfer}  time_connect:%{time_connect}  time_transfer:%{time_starttransfer}  time_total:%{time_total}  speed_down:%{speed_download}\n" "http://139.196.60.69/checkvip?ip=8.8.8.8&auth=2d411ebbdd8fb53b" >> bigsec_3.log'
