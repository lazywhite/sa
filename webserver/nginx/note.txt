## add auth for vhost
```
    auth_basic           "Authentication";
    auth_basic_user_file /usr/local/nginx/conf/auth_user.htpasswd;
```
apt-get install apache2-utils
htpasswd -c apt-get install apache2-utils <user>
prompt: 

## set proxy timeout for upstream
location / {
    proxy_connect_timeout    600;
    proxy_read_timeout       600;
    proxy_send_timeout       600;
}

## directory index for nginx 
location /somedir {
     autoindex on;
}

## nginx status
Active connections
    The current number of active client connections including Waiting connections.
accepts
    The total number of accepted client connections.
handled
    The total number of handled connections. Generally, the parameter value is the same as accepts unless some resource limits have been reached (for example, the worker_connections limit).
requests
    The total number of client requests.
Reading
    The current number of connections where nginx is reading the request header.
Writing
    The current number of connections where nginx is writing the response back to the client.
Waiting
    The current number of idle client connections waiting for a request.


## Topic

### how nginx process a request

[request process doc](http://nginx.org/en/docs/http/request_processing.html)
1. decides which server should process the request by "Host" header
    if this value doesn't match any server name or value is null, nginx will 
    route this request to default server
    if you don't allow request withou "Host" header, you can define a vhost whose
    server name is ""
2. nginx first searches for the most specific prefix location given by literal strings regardless of the listed order. 
