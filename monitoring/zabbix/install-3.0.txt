## zabbix-server
cd zabbix-3.0.3
yum install gcc  libxml2-devel  unixODBC-devel net-snmp-devel libcurl-devel libssh2-devel OpenIPMI-devel openssl-devel 
./configure --prefix=/usr/local --enable-server --enable-agent --with-mysql --with-net-snmp --with-libcurl --with-libxml2 --with-unixodbc --with-ssh2 --with-openipmi --with-openssl
make install 


/usr/local/etc/zabbix_server.conf
/usr/local/etc/zabbix_agent.conf

## zabbix-agent
./configure --prefix=/usr/local --enable-agent
cp misc/init.d/debian/zabbix-agent  /etc/init.d/

## zabbix-proxy
./configure --prefix=/usr --enable-proxy --with-net-snmp --with-mysql --with-ssh2

## zabbix-web
requirements: php-5.4 or above
rpm -Uvh https://mirror.webtatic.com/yum/el6/latest.rpm

install following packages
    php56w-cli-5.6.22-1.w6.x86_64
    php56w-pdo-5.6.22-1.w6.x86_64
    php56w-bcmath-5.6.22-1.w6.x86_64
    php56w-5.6.22-1.w6.x86_64
    php56w-mysql-5.6.22-1.w6.x86_64
    php56w-gd-5.6.22-1.w6.x86_64
    php56w-xml-5.6.22-1.w6.x86_64
    php56w-common-5.6.22-1.w6.x86_64
    php56w-mbstring-5.6.22-1.w6.x86_64
    php56w-devel-5.6.22-1.w6.x86_64
    php56w-pear-1.10.1-1.w6.noarch ##pecl support



/etc/php.ini
    post_max_size=16M
    max_execution_time=300
    max_input_time=300
    date.timezone=Europe/Riga
    always_populate_raw_post_data=-1

cp -ar frontend/php   /var/www/html/zabbix
chown -R apache:apache /var/www/html

# enable multi language support
yum -y install gettext 
cd /var/www/html/zabbix/locale; ./make_mo.sh 



### install java-gateway
./configure --prefix=/usr/local --enable-java
make install
/usr/local/sbin/zabbix_java
    startup.sh
    shutdown.sh
    settings.sh
    lib
        logback.xml

### configure 
/usr/local/etc/zabbix_server.conf:
    JavaGateway=<ip of java_gateway>
    JavaGatewayPort=10052
    StartJavaPoller=5
    
# restart zabbix_server 

### dashboard
1. start java application
# vim /usr/local/tomcat-7.0.65/bin/catalina.sh 
CATALINA_OPTS="-Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.authenticate=false -Dcom.sun.management.jmxremote.ssl=false -Dcom.sun.management.jmxremote.port=12345"

bin/catalina.sh start
2. configure host, add JMX interface
3. link Template JMX Generic, Template JMX Tomcat
4. item type : JMX agent proxy

### Alert
```
名称: send_sms
类型: 脚本
脚本名称: send_sms.py
脚本参数: 
    {ALERT.SENDTO}
    {ALERT.SUBJECT}
    {ALERT.MESSAGE}
```

## default message
```
Trigger: {TRIGGER.NAME}
Trigger status: {TRIGGER.STATUS}
Trigger severity: {TRIGGER.SEVERITY}
Trigger URL: {TRIGGER.URL}
Event Datetime: {EVENT.DATE}{EVENT.TIME}

Item values:

{ITEM.NAME1} ({HOST.NAME1}:{ITEM.KEY1}): {ITEM.VALUE1}


Original event ID: {EVENT.ID}
```

## Problem
[root@demo~]# zabbix_get -s host -k system.uptime
zabbix_get [8967]: Check access restrictions in Zabbix agent configuration

    check logfile of zabbix agent, connection from "114.55.57.153" rejected, add ip to "Server="  list
